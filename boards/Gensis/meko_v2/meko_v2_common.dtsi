#include <zephyr/dt-bindings/mipi_dbi/mipi_dbi.h>

&gpio0 {
    status = "okay";
};

&gpio1 {
    status = "okay";
};

&gpiote {
    status = "okay";
};

/ {

    chosen {
        zephyr,display=&epd;
    };

    motor: zephyr,user {
        motor-gpios = <&gpio1 15 GPIO_ACTIVE_HIGH>;
    };

    buttons {
        compatible = "gpio-keys";

        button_power: button-0 {
            gpios = <&gpio0 27 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
            label = "Power button";
            zephyr,code = <INPUT_KEY_0>;
        };

        button_side_left: button-1 {
            gpios = <&gpio0 5 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
            label = "Left side button";
            zephyr,code = <INPUT_KEY_1>;
        };

        button_side_right: button-2 {
            gpios = <&gpio0 30 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
            label = "Right side button";
            zephyr,code = <INPUT_KEY_2>;
        };

        button_volume_up: button-3 {
            gpios = <&gpio1 0 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
            label = "Volume up button";
            zephyr,code = <INPUT_KEY_3>;
        };

        button_volume_down: button-4 {
            gpios = <&gpio1 5 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
            label = "Volume down button";
            zephyr,code = <INPUT_KEY_4>;
        };
    };

    mipi_dbi {
        compatible = "zephyr,mipi-dbi-spi";
        spi-dev = <&spi1>;

        dc-gpios = <&gpio0  14 GPIO_ACTIVE_HIGH>;
        reset-gpios = <&gpio0 12 GPIO_ACTIVE_LOW>;

        #address-cells = <1>;
        #size-cells = <0>;

        epd: ssd16xx@0 {
            compatible = "solomon,ssd1681";
            mipi-max-frequency = <4000000>;
            reg = <0>;
            width = <200>;
            height = <200>;

            busy-gpios = <&gpio0 13 GPIO_ACTIVE_HIGH>;

            tssv = <0x80>;

            full {
                border-waveform = <0x05>;
            };

            partial {
                border-waveform = <0x3c>;
            };
        };
    };
};